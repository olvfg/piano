<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Piano</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" media="screen" href="style.css" />
    <script src="main.js"></script>
</head>
<body>
    <ul class="set">
        <li data-key="65" class="white b"></li>
        <li data-key="87" class="black as"></li>
        <li data-key="83" class="white a"></li>
        <li data-key="69" class="black gs"></li>
        <li data-key="68" class="white g"></li>
        <li data-key="82" class="black fs"></li>
        <li data-key="70" class="white f"></li>
        <li data-key="71" class="white e"></li>
        <li data-key="89" class="black ds"></li>
        <li data-key="85" class="white d"></li>
        <li data-key="74" class="black cs"></li>
        <li data-key="73" class="white c"></li>
    </ul>


    <audio data-key="65" src="wav/b1.wav"></audio>
    <audio data-key="87" src="wav/a1s.wav"></audio>
    <audio data-key="83" src="wav/a1.wav"></audio>
    <audio data-key="69" src="wav/g1s.wav"></audio>
    <audio data-key="68" src="wav/g1.wav"></audio>
    <audio data-key="82" src="wav/f1s.wav"></audio>
    <audio data-key="70" src="wav/f1.wav"></audio>
    <audio data-key="71" src="wav/e1.wav"></audio>
    <audio data-key="89" src="wav/d1s.wav"></audio>
    <audio data-key="85" src="wav/d1.wav"></audio>
    <audio data-key="74" src="wav/c1s.wav"></audio>
    <audio data-key="73" src="wav/c1.wav"></audio>


    <script>
        function playSound(e){
            const audio = document.querySelector(`audio[data-key="${e.keyCode}"]`);
            const key = document.querySelector(`li[data-key="${e.keyCode}"]`);
            audio.currentTime = 0;
            
            if (!audio) return;
            audio.play();

            li.classList.add('playing');
        }
        function removeTransition(e){
            if (e.propertyName !== 'transform') return;
            this.classList.remove('playing');
        }
        const sets = document.querySelectorAll('li');
        sets.forEach(key => key.addEventListener('transitioned', removeTransition));

        window.addEventListener('keydown', playSound);
    </script>
</body>
</html>